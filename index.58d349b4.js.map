{"mappings":"uoBACAA,EAAA,S,gICDA,IAAAC,EAAAD,EAAA,SAMAE,eAAeC,EAAoBC,GACjC,MAAMC,QAAiB,EAAAJ,EAAAK,mBAQvB,OANeF,EAAaG,KAAIC,GACRH,EAASI,OAAOC,MAAKC,GAAUA,EAAOH,KAAOA,IAE9CI,M,uCCLzB,SAASC,EAAyBC,EAASC,GACzC,MAAMC,EAAiBC,aAAaC,QAAQC,SAK5C,OAJ6BC,KAAKC,MAAML,GACCN,MACvCC,GAAUA,EAAOH,KAAOO,IAIjB,6DAA6DD,kCAG7D,wDAAwDA,4B,qGCXnE,SAASQ,EAAqBC,GAC5B,GAAKN,aAAaC,QAAQC,SAInB,CACL,MAAMH,EAAiBC,aAAaC,QAAQC,SACtCK,EAAYJ,KAAKC,MAAML,GAC7BQ,EAAUC,KAAKF,GACfN,aAAaS,QAAQ,UAAWN,KAAKO,UAAUH,G,KARb,CAClC,MAAMI,EAAQ,GACdA,EAAMH,KAAKF,GACXN,aAAaS,QAAQ,UAAWN,KAAKO,UAAUC,G,kGCFnD,SAASC,EAAwBN,GAC/B,MAAMP,EAAiBC,aAAaC,QAAQC,SAEtCW,EADYV,KAAKC,MAAML,GACIe,QAAOC,GAASA,EAAMxB,KAAOe,EAAYf,KAC1ES,aAAaS,QAAQ,UAAWN,KAAKO,UAAUG,G","sources":["src/js/modal-movie-details.js","src/js/functions/getGenresByGenresId.js","src/js/functions/generateLibraryBtnMarkup.js","src/js/functions/onLibraryBtnAddClick.js","src/js/functions/onLibraryBtnRemoveClick.js"],"sourcesContent":["// Modal window for movie details\nimport { getGenresByGenresId } from './functions/getGenresByGenresId';\nimport { generateLibraryBtnMarkup } from './functions/generateLibraryBtnMarkup';\nimport { onLibraryBtnAddClick } from './functions/onLibraryBtnAddClick';\nimport { onLibraryBtnRemoveClick } from './functions/onLibraryBtnRemoveClick';\n\n/**\n * Opens modal window with movie details\n * @param {Object} Object Movie object\n */\nfunction openModalMovieDetails({\n  poster_path,\n  title,\n  overview,\n  vote_average,\n  vote_count,\n  popularity,\n  genre_ids,\n  id,\n}) {\n  const modalMovieDetails = document.querySelector('[data-modal-details]');\n  const genres = getGenresByGenresId(genre_ids);\n  const libraryBtn = generateLibraryBtnMarkup(id);\n\n  modalMovieDetails.innerHTML = `<div class=\"modal-details\">\n            <button type=\"button\" class=\"btn modal-close\" data-modal-details-close>\n                <svg class=\"icon-close\" width=\"10.5\" height=\"10.5\">\n                    <use href=\"./images/icons.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <img src=\"${poster_path}\" />\n            <h2>${title}</h2>\n            <h3>Vote / Votes</h3>\n            <p><span>${vote_average}</span> / <span>${vote_count}</span></p>\n            <h3>Popularity</h3>\n            <p>${popularity}</p>\n            <h3>Genre</h3>\n            <p class='modal-genre'>${genres}</p>\n            <h3>About</h3>\n            <p>${overview}</p>\n            ${libraryBtn}\n        </div>`;\n\n  const libraryBtnAdd = document.querySelector('[data-add-to-library-btn]');\n  const libraryBtnRemove = document.querySelector(\n    '[data-remove-from-library-btn]'\n  );\n  const modalDetailsCloseBtn = document.querySelector(\n    '[data-modal-details-close]'\n  );\n    \n  modalMovieDetails.classList.remove('is-hidden');\n  libraryBtnAdd.addEventListener('click', onLibraryBtnAddClick);\n  libraryBtnRemove.addEventListener('click', onLibraryBtnRemoveClick);\n  modalDetailsCloseBtn.addEventListener('click', () => {\n    modalMovieDetails.classList.add('is-hidden');\n  });\n}\n\nexport { openModalMovieDetails };\n","import { fetchGenresList } from './movieApiService';\n/**\n *\n * @param {Array} genresIdsArr Array of genres_ids\n * @returns {Promise} Promise with array of genres (strings) as a result\n */\nasync function getGenresByGenresId(genresIdsArr) {\n  const response = await fetchGenresList();\n\n  const genres = genresIdsArr.map(id => {\n    const genresObjects = response.genres.find(object => object.id === id);\n\n    return genresObjects.name;\n  });\n\n  return genres;\n}\n\nexport { getGenresByGenresId };\n","/**\n *\n * @param {Object} classes Classes to add to button\n * @param {String} movieId Movie ID\n * @returns {String} Button markup\n */\n\nfunction generateLibraryBtnMarkup(classes, movieId) {\n  const filmsInLibrary = localStorage.getItem(library);\n  const parsedFilmsInLibrary = JSON.parse(filmsInLibrary);\n  const isInLibrary = parsedFilmsInLibrary.find(\n    object => object.id === movieId\n  );\n  if (isInLibrary) {\n    /* Remove button */\n    return `<button type=\"button\" data-remove-from-library-btn class=\"${classes}\">Remove from library</button>`;\n  } else {\n    /* Add button */\n    return `<button type=\"button\" data-add-to-library-btn class=\"${classes}\">Add to library</button>`;\n  }\n}\n\nexport { generateLibraryBtnMarkup };\n","// const libraryBtnAdd = document.querySelector('[data-add-to-library-btn]');\n// libraryBtnAdd.addEventListener('click', onAddLibraryBtnClick);\n\n/**\n * Sets local storage item with key 'library' and value of Array of movie objects. Adds Item\n * @param {Object} movieObject  Object with movie details\n */\nfunction onLibraryBtnAddClick(movieObject) {\n  if (!localStorage.getItem(library)) {\n    const array = [];\n    array.push(movieObject);\n    localStorage.setItem('library', JSON.stringify(array));\n  } else {\n    const filmsInLibrary = localStorage.getItem(library);\n    const moviesArr = JSON.parse(filmsInLibrary);\n    moviesArr.push(movieObject);\n    localStorage.setItem('library', JSON.stringify(moviesArr));\n  }\n}\n\nexport { onLibraryBtnAddClick };\n","// const libraryBtnRemove = document.querySelector(\n//   '[data-remove-from-library-btn]'\n// );\n// libraryBtnRemove.addEventListener('click', removeFromLibrary);\n\n/**\n * Sets local storage item with key 'library' and value of Array of movie objects. Removes item\n * @param {*} movieObject \n */\nfunction onLibraryBtnRemoveClick(movieObject) {\n  const filmsInLibrary = localStorage.getItem(library);\n  const moviesArr = JSON.parse(filmsInLibrary);\n  const newMoviesArray = moviesArr.filter(value => value.id !== movieObject.id);\n  localStorage.setItem('library', JSON.stringify(newMoviesArray));\n}\n\nexport { onLibraryBtnRemoveClick };\n"],"names":["parcelRequire","$ffJBb","async","$22e8cea54550bc67$export$d01ede1d0fdc2a9b","genresIdsArr","response","fetchGenresList","map","id","genres","find","object","name","$d487f399e42ca8ab$export$e3e109041f9f179f","classes","movieId","filmsInLibrary","localStorage","getItem","library","JSON","parse","$c099492226baac26$export$11679713ab79fae","movieObject","moviesArr","push","setItem","stringify","array","$a78dc9a2f258b5ac$export$2d9da69b85782986","newMoviesArray","filter","value"],"version":3,"file":"index.58d349b4.js.map"}